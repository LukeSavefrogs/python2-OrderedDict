name: "Run tests"

on: push

jobs:
    release:
      runs-on: ubuntu-latest
      
      permissions:
        contents: read
  
      steps:
        - name: "ğŸ›’ Checkout repository"
          uses: actions/checkout@v3
          with:
            fetch-depth: 0
        
        - name: "ğŸ Install Python"
          uses: actions/setup-python@v4
          with:
            python-version: '3.9'
        
        - name: "ğŸ“œ Install Poetry"
          uses: abatilo/actions-poetry@v2
          with:
            poetry-version: 1.3.2
  
        - name: "ğŸ” Install dependencies"
          run: poetry install --with dev
  
        - name: "ğŸ§ª Run tests"
          run: |
            poetry run poe test